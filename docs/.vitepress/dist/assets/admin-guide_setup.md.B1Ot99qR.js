import{_ as n,c as i,o as t,ag as r}from"./chunks/framework.B6P7veLL.js";const h=JSON.parse('{"title":"Ersteinrichtung","description":"","frontmatter":{},"headers":[],"relativePath":"admin-guide/setup.md","filePath":"admin-guide/setup.md","lastUpdated":1768213913000}'),s={name:"admin-guide/setup.md"};function l(a,e,d,o,u,c){return t(),i("div",null,[...e[0]||(e[0]=[r('<h1 id="ersteinrichtung" tabindex="-1">Ersteinrichtung <a class="header-anchor" href="#ersteinrichtung" aria-label="Permalink to &quot;Ersteinrichtung&quot;">​</a></h1><h2 id="administrator-anlegen-einmalig" tabindex="-1">Administrator anlegen (einmalig) <a class="header-anchor" href="#administrator-anlegen-einmalig" aria-label="Permalink to &quot;Administrator anlegen (einmalig)&quot;">​</a></h2><p>Beim ersten Start ist die Anwendung im Setup‑Modus. In diesem Schritt wird der <strong>erste Administrator</strong> angelegt. Dieser Account ist notwendig, weil ohne Admin niemand Nutzer, Gruppen und Stammdaten verwalten kann.</p><p>Nach dem Anlegen des Administrators wechselt die Anwendung zur Anmeldung. Ab diesem Zeitpunkt können weitere Nutzer und Gruppen angelegt werden.</p><p>Technischer Hinweis: Die Anwendung erkennt „Ersteinrichtung erforderlich“, wenn in der Datenbank noch <strong>kein</strong> Benutzer existiert.</p><div class="warning custom-block"><p class="custom-block-title">Empfehlung</p><ul><li>Legen Sie mindestens einen zweiten Admin an, sobald die Grundkonfiguration steht (Single‑Admin‑Risiko).</li></ul></div><h2 id="datenquelle-wahlen-wenn-bereits-eine-produktive-db-existiert" tabindex="-1">Datenquelle wählen (wenn bereits eine produktive DB existiert) <a class="header-anchor" href="#datenquelle-wahlen-wenn-bereits-eine-produktive-db-existiert" aria-label="Permalink to &quot;Datenquelle wählen (wenn bereits eine produktive DB existiert)&quot;">​</a></h2><p>Wenn FMB Log auf mehreren Arbeitsplätzen betrieben wird, existiert in der Regel bereits eine produktive Hub‑Datenquelle (DB + <code>vaults/</code> + <code>protocols/</code> im gemeinsamen Ordner).</p><p>In diesem Fall muss auf einem neuen Client <strong>keine Ersteinrichtung</strong> durchgeführt werden. Stattdessen:</p><ol><li>Im Setup‑Modus auf <strong>Datenquelle ändern</strong> klicken.</li><li>Den Pfad zur bestehenden Hub‑DB auswählen (z. B. im Netzlaufwerk).</li><li>Die Anwendung lädt die Datenquelle; wenn bereits Benutzer existieren, wechselt FMB Log automatisch in den normalen <strong>Anmeldemodus</strong>.</li></ol><div class="info custom-block"><p class="custom-block-title">Kurzfassung</p><ul><li><strong>Nur einmal</strong> im Betrieb: Ersteinrichtung + erster Admin.</li><li><strong>Alle weiteren Clients</strong>: Datenquelle ändern → anmelden.</li></ul></div><h2 id="erstkonfiguration-empfohlen" tabindex="-1">Erstkonfiguration (empfohlen) <a class="header-anchor" href="#erstkonfiguration-empfohlen" aria-label="Permalink to &quot;Erstkonfiguration (empfohlen)&quot;">​</a></h2><p>Nach der Ersteinrichtung empfiehlt sich eine kurze Grundkonfiguration, damit das Tagesgeschäft sauber getrennt ist (Messung/Prüfung/Administration):</p><ol><li>Legen Sie mindestens eine <strong>Benutzergruppe</strong> an (z. B. „Messung“, „Auswertung“, „Key‑User“).</li><li>Weisen Sie den Gruppen die benötigten Rechte in der <strong>Rechte‑Matrix</strong> zu.</li><li>Legen Sie Nutzer an und ordnen Sie sie den Gruppen zu.</li></ol><p>Warum dieser Schritt wichtig ist: In der Praxis sollen kritische Aktionen (z. B. FGW ändern, Passwörter zurücksetzen) nur wenigen Personen möglich sein, während der Import und die Arbeit mit Gebinden breiter verfügbar sein kann.</p><div class="info custom-block"><p class="custom-block-title">Kurzfassung</p><ul><li>Admin anlegen → anmelden → Gruppen/Rechte/Nutzer einrichten</li><li>Rechte steuern Sichtbarkeit und Bearbeitung in der UI</li></ul></div><h2 id="integritatsschutz-–-db‐key‐zertifikat-verpflichtend" tabindex="-1">Integritätsschutz – DB‑Key‑Zertifikat (verpflichtend) <a class="header-anchor" href="#integritatsschutz-–-db‐key‐zertifikat-verpflichtend" aria-label="Permalink to &quot;Integritätsschutz – DB‑Key‑Zertifikat (verpflichtend)&quot;">​</a></h2><p>Der Integritätsschutz verhindert, dass Manipulationen an <strong>Benutzern/Gruppen/Rechten</strong> in der SQLite‑Datei unbemerkt bleiben. Technisch werden die relevanten Datensätze signiert.</p><p>Damit ein Angreifer den Schutz nicht durch einen einfachen Austausch des DB‑Public‑Keys aushebeln kann, ist ein <strong>DB‑Key‑Zertifikat</strong> verpflichtend: Der DB‑Public‑Key wird durch eine Root‑Signatur autorisiert und die Anwendung prüft diese Signatur gegen den fest eingebauten Root‑Public‑Key.</p><p>Dabei gilt:</p><ul><li>Der <strong>Root‑Public‑Key</strong> ist fest in der Anwendung hinterlegt (Compile‑Time).</li><li>Der <strong>Root‑Private‑Key</strong> bleibt beim Administrator und wird nur zum Erstellen des Zertifikats benötigt (z. B. beim Build/Deployment).</li></ul><h3 id="vorgehen" tabindex="-1">Vorgehen <a class="header-anchor" href="#vorgehen" aria-label="Permalink to &quot;Vorgehen&quot;">​</a></h3><ol><li>Root‑Schlüssel erzeugen (einmalig, nur auf dem Admin‑Build‑Rechner): <ul><li><code>pnpm -s integrity:rootkey</code></li><li>Ergebnis: Public Key in <code>src/lib/security/rootPublicKey.jwk.json</code>, Private Key in <code>.secrets/…</code> (darf nicht committed werden)</li></ul></li><li>In der Anwendung: <strong>Einstellungen → Integritätsschutz → Aktivieren</strong><ul><li>Dadurch wird <code>&lt;db&gt;.integrity.pub.json</code> neben der DB erzeugt.</li></ul></li><li>Zertifikat für den DB‑Public‑Key erzeugen: <ul><li><code>pnpm -s integrity:certify --db-public &lt;db&gt;.integrity.pub.json --out &lt;db&gt;.integrity.dbkey.json</code></li></ul></li><li>Auf dem Netzlaufwerk: Die Dateien gegen Änderungen schützen (ACL/Schreibrechte): <ul><li><code>&lt;db&gt;.integrity.dbkey.json</code> (Zertifikat)</li><li><code>&lt;db&gt;.integrity.pub.json</code> (Public Key)</li></ul></li></ol><div class="warning custom-block"><p class="custom-block-title">Hinweise</p><ul><li>Ohne <code>&lt;db&gt;.integrity.dbkey.json</code> gilt der Integritätsschutz als <strong>nicht funktionsfähig</strong> (Fail‑Closed) und FMB Log blockiert sicherheitsrelevante Vorgänge, bis das Zertifikat wieder vorhanden ist.</li><li>Bewahren Sie den Root‑Private‑Key außerhalb des Repos sicher auf.</li><li>Das Zertifikat ist nicht geheim, aber wichtig für Recovery/Deployment: Sie können es zusätzlich separat sichern.</li></ul></div>',24)])])}const m=n(s,[["render",l]]);export{h as __pageData,m as default};
