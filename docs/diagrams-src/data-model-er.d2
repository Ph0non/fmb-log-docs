direction: down

style: {
  stroke: "#3d3e3d"
  stroke-width: 1
  font-size: 20
  border-radius: 8
}

title: "Datenmodell Radioaktive Reststoffe" {
  near: top-center
  shape: text
  style.font-size: 24
  style.bold: true
}

# Row 1: Stammdaten und Nuklidvektor
row1: {
  direction: right
  label: ""
  style.fill: transparent
  style.stroke: transparent

  stamm: "Stammdaten" {
    direction: down
    style.fill: "#006e78"
    style.font-color: "#ffffff"

    fmk: "FMK" {
      style.fill: "#ffffff"
      style.font-color: "#3d3e3d"
    }

    fmk_nv: "FMK_NV\nZuordnung" {
      style.fill: "#ffffff"
      style.font-color: "#3d3e3d"
    }

    fmk -> fmk_nv
  }

  nuklid: "Nuklidvektor" {
    direction: down
    style.fill: "#63a90f"
    style.font-color: "#ffffff"

    nuklidvektor: "Nuklidvektor\n(+ Jahr)" {
      style.fill: "#ffffff"
      style.font-color: "#3d3e3d"
    }

    nv_nuklide: "NV_Nuklide\n(Anteile)" {
      style.fill: "#ffffff"
      style.font-color: "#3d3e3d"
    }

    freigabewerte: "Freigabewerte\n(FGW)" {
      style.fill: "#ffffff"
      style.font-color: "#3d3e3d"
    }

    nuklidvektor -> nv_nuklide: 1:n
  }

  stamm.fmk_nv -> nuklid.nuklidvektor
}

# Row 2: Betriebsdaten
row2: {
  direction: right
  label: ""
  style.fill: transparent
  style.stroke: transparent

  betrieb: "Betriebsdaten" {
    direction: down
    style.fill: "#217ca3"
    style.font-color: "#ffffff"

    datenblatt: "Datenblatt" {
      style.fill: "#ffffff"
      style.font-color: "#3d3e3d"
    }

    gebinde: "Gebinde" {
      style.fill: "#ffffff"
      style.font-color: "#3d3e3d"
    }

    messung: "Messung\n(+ Protokoll-Ref)" {
      style.fill: "#ffffff"
      style.font-color: "#3d3e3d"
    }

    messwerte: "Messwerte\n(pro Nuklid)" {
      style.fill: "#ffffff"
      style.font-color: "#3d3e3d"
    }

    datenblatt -> gebinde: 1:n
    gebinde -> messung: 1:n
    messung -> messwerte: 1:n
  }

  auth: "Benutzer & Rechte" {
    direction: down
    style.fill: "#f17119"
    style.font-color: "#ffffff"

    user: "User" {
      style.fill: "#ffffff"
      style.font-color: "#3d3e3d"
    }

    usergroup: "UserGroup" {
      style.fill: "#ffffff"
      style.font-color: "#3d3e3d"
    }

    rechte: "Rechte" {
      style.fill: "#ffffff"
      style.font-color: "#3d3e3d"
    }

    user -> usergroup: n:m
    usergroup -> rechte: n:m
  }
}

# Cross-container relationships
row1.stamm.fmk -> row2.betrieb.gebinde: 1:n {
  style.stroke-dash: 3
}
